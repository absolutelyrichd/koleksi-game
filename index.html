<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dasbor Koleksi Game</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Fonts: Lexend Mega (Judul) & Public Sans (Body) untuk kesan modern/brutal -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lexend+Mega:wght@400;700&family=Public+Sans:wght@500;700;900&display=swap" rel="stylesheet">

    <style>
        :root {
            --neo-black: #1a1a1a;
            --neo-white: #ffffff;
            --neo-bg: #e0e7ff; /* indigo-100 */
            --neo-primary: #a3e635; /* lime-400 */
            --neo-secondary: #22d3ee; /* cyan-400 */
            --neo-accent: #f472b6; /* pink-400 */
            --neo-warning: #facc15; /* yellow-400 */
        }

        body {
            font-family: 'Public Sans', sans-serif;
            background-color: var(--neo-bg);
            color: var(--neo-black);
            /* Pola dot background */
            background-image: radial-gradient(var(--neo-black) 1px, transparent 1px);
            background-size: 24px 24px;
        }

        h1, h2, h3, h4, .font-display {
            font-family: 'Lexend Mega', sans-serif;
        }

        /* --- UTILITIES NEOBRUTALISM (SOFT ROUNDED) --- */
        
        /* Kotak Dasar */
        .neo-box {
            border: 3px solid var(--neo-black);
            box-shadow: 5px 5px 0px 0px var(--neo-black);
            border-radius: 12px; /* UPDATED: Rounded */
        }

        /* Tombol Dasar */
        .neo-btn {
            border: 3px solid var(--neo-black);
            box-shadow: 4px 4px 0px 0px var(--neo-black);
            transition: all 0.1s ease;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-radius: 8px; /* UPDATED: Rounded */
        }
        
        .neo-btn:hover:not(:disabled) {
            transform: translate(-2px, -2px);
            box-shadow: 6px 6px 0px 0px var(--neo-black);
        }
        
        .neo-btn:active:not(:disabled) {
            transform: translate(2px, 2px);
            box-shadow: 2px 2px 0px 0px var(--neo-black);
        }

        .neo-btn:disabled {
            background-color: #9ca3af;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }

        /* Input Fields */
        .neo-input {
            width: 100%;
            background-color: var(--neo-white);
            border: 3px solid var(--neo-black);
            padding: 0.75rem;
            font-weight: 700;
            outline: none;
            transition: box-shadow 0.2s;
            border-radius: 8px; /* UPDATED: Rounded */
        }
        .neo-input:focus {
            background-color: #f0f9ff;
            box-shadow: 4px 4px 0px 0px var(--neo-black);
        }

        /* Tab Navigation */
        .tab-btn {
            padding: 10px 20px;
            border: 3px solid var(--neo-black);
            background: var(--neo-white);
            font-weight: 700;
            margin-right: -3px; /* Overlap borders */
            position: relative;
            z-index: 0;
            border-radius: 12px 12px 0 0; /* UPDATED: Rounded Top Only */
        }
        .tab-btn.active {
            background: var(--neo-secondary);
            z-index: 10;
            box-shadow: 0px -4px 0px 0px var(--neo-black) inset;
        }

        /* Badge */
        .neo-badge {
            border: 2px solid var(--neo-black);
            font-size: 0.75rem;
            font-weight: 900;
            padding: 2px 8px;
            text-transform: uppercase;
            box-shadow: 2px 2px 0px 0px rgba(0,0,0,0.2);
            border-radius: 6px; /* UPDATED: Rounded */
        }

        /* Modal Backdrop */
        .modal-backdrop {
            background-color: rgba(26, 26, 26, 0.85);
            backdrop-filter: blur(4px);
        }
        
        /* Scrollbar Kasar */
        ::-webkit-scrollbar {
            width: 12px;
        }
        ::-webkit-scrollbar-track {
            background: var(--neo-white);
            border-left: 3px solid var(--neo-black);
        }
        ::-webkit-scrollbar-thumb {
            background: var(--neo-accent);
            border: 3px solid var(--neo-black);
            border-radius: 6px; /* UPDATED */
        }
        ::-webkit-scrollbar-thumb:hover {
            background: var(--neo-primary);
        }
    </style>
</head>
<body class="min-h-screen p-4 md:p-8">

    <!-- LOGIN SCREEN -->
    <div id="login-screen" class="flex min-h-[80vh] items-center justify-center">
        <div class="neo-box max-w-md w-full p-8 text-center bg-yellow-300">
            <div class="inline-block bg-black text-white p-2 mb-4 font-display font-bold text-xl transform -rotate-2 rounded-sm">
                GAME COLLECTION
            </div>
            <h1 class="text-4xl font-black mb-2 uppercase">Area Terbatas</h1>
            <p class="font-bold mb-8 border-b-4 border-black inline-block pb-1">Silakan identifikasi diri anda</p>
            
            <button id="login-button" class="neo-btn w-full bg-white py-4 flex items-center justify-center gap-3 hover:bg-cyan-300">
                <svg class="w-6 h-6" viewBox="0 0 24 24"><path fill="currentColor" d="M21.35 11.1h-9.17v2.73h6.51c-.33 3.81-3.5 5.44-6.5 5.44C8.36 19.27 5 16.25 5 12c0-4.1 3.2-7.27 7.2-7.27c3.09 0 4.9 1.97 4.9 1.97L19 4.72S16.56 2 12.1 2C6.42 2 2.03 6.8 2.03 12c0 5.05 4.13 10 10.22 10c5.35 0 9.25-3.67 9.25-9.09c0-1.15-.15-1.81-.15-1.81Z"/></svg>
                Masuk dengan Google
            </button>
        </div>
    </div>

    <!-- APP SCREEN -->
    <div id="app-screen" class="hidden max-w-7xl mx-auto">
        
        <!-- NAVBAR -->
        <header id="main-navbar" class="neo-box mb-8 p-4 flex flex-col md:flex-row justify-between items-center bg-white sticky top-2 z-40 transition-all duration-300">
            <div class="flex items-center gap-3 mb-4 md:mb-0">
                <!-- UPDATED: rounded-lg for logo -->
                <div class="w-12 h-12 bg-purple-400 border-3 border-black flex items-center justify-center font-display text-2xl font-bold shadow-[3px_3px_0px_0px_rgba(0,0,0,1)] rounded-lg">
                    GC
                </div>
                <div>
                    <h1 class="text-xl font-black uppercase leading-none">Game<br>Collection</h1>
                </div>
            </div>

            <!-- TABS NAV -->
            <nav id="tabs" class="flex flex-wrap justify-center gap-2">
                <button data-tab="tab-list" class="tab-btn active">DAFTAR</button>
                <button data-tab="tab-stats" class="tab-btn">STATISTIK</button>
                <button data-tab="tab-manage" class="tab-btn">ATUR DATA</button>
            </nav>

            <div class="flex items-center gap-3 mt-4 md:mt-0">
                <!-- UPDATED: rounded-full for user photo -->
                <img id="user-photo" src="" class="w-10 h-10 border-3 border-black bg-gray-300 rounded-full" alt="User">
                <div class="hidden md:block text-right leading-tight">
                    <p id="user-name" class="font-bold text-sm truncate max-w-[100px]">User</p>
                    <button id="logout-button-text" class="text-xs font-black text-red-500 hover:underline uppercase">KELUAR</button>
                </div>
            </div>
        </header>

        <!-- MAIN CONTENT -->
        <main>
            
            <!-- TAB: LIST GAME -->
            <div id="tab-list" class="tab-content">
                <!-- Filters & Actions -->
                <div class="neo-box p-4 bg-yellow-300 mb-8 flex flex-col lg:flex-row gap-4 items-end">
                    <div class="w-full grid grid-cols-1 md:grid-cols-5 gap-4">
                        <div class="md:col-span-1">
                            <label class="font-black text-xs uppercase mb-1 block">Cari Judul</label>
                            <input type="text" id="filter-title" class="neo-input" placeholder="Ketik judul...">
                        </div>
                        <div>
                            <label class="font-black text-xs uppercase mb-1 block">Platform</label>
                            <select id="filter-platform" class="neo-input cursor-pointer">
                                <option value="">SEMUA</option>
                            </select>
                        </div>
                        <div>
                            <label class="font-black text-xs uppercase mb-1 block">Lokasi</label>
                            <select id="filter-location" class="neo-input cursor-pointer">
                                <option value="">SEMUA</option>
                            </select>
                        </div>
                        <div>
                            <label class="font-black text-xs uppercase mb-1 block">Status</label>
                            <select id="filter-status" class="neo-input cursor-pointer">
                                <option value="">SEMUA</option>
                                <option>Belum dimainkan</option>
                                <option>Dimainkan</option>
                                <option>Selesai</option>
                            </select>
                        </div>
                        
                         <!-- UPDATE: Sort Dropdown yang Lebih Mencolok -->
                         <div>
                            <label class="font-black text-xs uppercase mb-1 block bg-black text-white inline-block px-1 transform -rotate-1 rounded-sm">URUTKAN</label>
                            <div class="relative">
                                <select id="sort-options" class="neo-input cursor-pointer appearance-none border-3 border-black bg-pink-300 hover:bg-pink-400 transition-colors text-black font-black">
                                    <option value="title-asc">üÖ∞Ô∏è Judul (A-Z)</option>
                                    <option value="title-desc">üî† Judul (Z-A)</option>
                                    <option value="price-asc">üí∏ Termurah</option>
                                    <option value="price-desc">üíé Termahal</option>
                                </select>
                                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-black">
                                    <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
                                </div>
                            </div>
                        </div>

                    </div>
                    <button id="add-game-button" class="neo-btn bg-lime-400 px-6 py-3 h-[52px] w-full lg:w-auto flex-shrink-0 flex items-center justify-center gap-2 whitespace-nowrap">
                        <span class="text-xl leading-none">+</span> BARU
                    </button>
                </div>

                <!-- Bulk Actions Bar -->
                <div id="bulk-actions-bar" class="mb-4 flex justify-between items-center bg-black text-white p-3 border-3 border-black shadow-[4px_4px_0px_0px_rgba(255,255,255,1)] hidden rounded-lg">
                    <div class="font-bold px-2">
                        <input type="checkbox" id="select-all-checkbox" class="w-5 h-5 accent-lime-400 mr-2 align-middle rounded-sm">
                        <span id="selection-info">0 DIPILIH</span>
                    </div>
                    <div class="flex gap-2">
                        <button id="bulk-edit-button" class="bg-blue-500 text-white px-3 py-1 font-bold border-2 border-white hover:bg-blue-600 disabled:opacity-50 rounded-md">EDIT</button>
                        <button id="bulk-delete-button" class="bg-red-500 text-white px-3 py-1 font-bold border-2 border-white hover:bg-red-600 disabled:opacity-50 rounded-md">HAPUS</button>
                    </div>
                </div>

                <!-- Games Grid -->
                <div id="game-list-cards" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                    <!-- Cards injected by JS -->
                    <div class="col-span-full text-center py-12 font-bold opacity-50 text-xl rounded-lg border-3 border-black border-dashed">MEMUAT DATA...</div>
                </div>
                
                <!-- Pagination -->
                <div id="pagination-container" class="flex justify-center gap-2 mt-10 font-bold"></div>
                
                <!-- Hidden elements -->
                <div id="game-list-body" class="hidden"></div>
                <div id="total-price" class="hidden"></div>
                <div id="most-expensive-game" class="hidden"></div>
            </div>

            <!-- TAB: STATISTIK -->
            <div id="tab-stats" class="tab-content hidden">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    
                    <!-- Summary Card -->
                    <div class="neo-box p-6 bg-pink-300">
                        <h2 class="font-display text-2xl font-bold mb-6 border-b-3 border-black pb-2">RINGKASAN ASET</h2>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="bg-white border-3 border-black p-4 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] rounded-lg">
                                <div class="text-xs font-bold text-gray-500 uppercase">Total Nilai</div>
                                <div id="stats-total-price" class="text-2xl md:text-3xl font-black text-green-600 mt-1">Rp 0</div>
                            </div>
                            <div class="bg-white border-3 border-black p-4 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] rounded-lg">
                                <div class="text-xs font-bold text-gray-500 uppercase">Item Termahal</div>
                                <div id="stats-expensive" class="text-lg font-black mt-1 leading-tight">-</div>
                            </div>
                        </div>
                    </div>

                    <!-- Status Chart -->
                    <div class="neo-box p-6 bg-white">
                        <h3 class="font-bold text-xl mb-4 uppercase">Status Permainan</h3>
                        <div class="relative h-64"><canvas id="status-chart"></canvas></div>
                    </div>

                    <!-- Platform Chart -->
                    <div class="neo-box p-6 bg-white">
                        <h3 class="font-bold text-xl mb-4 uppercase">Distribusi Platform</h3>
                        <div class="relative h-64 flex justify-center items-center"><canvas id="platform-chart"></canvas></div>
                    </div>

                    <!-- Location Chart -->
                    <div class="neo-box p-6 bg-white">
                        <h3 class="font-bold text-xl mb-4 uppercase">Distribusi Lokasi</h3>
                        <div class="relative h-64 flex justify-center items-center"><canvas id="location-chart"></canvas></div>
                    </div>
                </div>
            </div>

            <!-- TAB: MANAGE DATA -->
            <div id="tab-manage" class="tab-content hidden">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    
                    <!-- JSON Backup -->
                    <div class="neo-box bg-cyan-300 p-6 lg:col-span-1">
                        <h3 class="font-display text-xl font-black mb-4 uppercase border-b-3 border-black pb-2">DATA JSON</h3>
                        <p class="font-bold text-sm mb-4">Backup dan restore koleksi anda.</p>
                        
                        <div class="space-y-4">
                            <button id="download-json-button" class="neo-btn w-full bg-white hover:bg-gray-100 py-3 flex items-center justify-center gap-2">
                                <span>‚¨áÔ∏è</span> UNDUH JSON
                            </button>
                            
                            <div class="relative">
                                <button id="upload-json-button" class="neo-btn w-full bg-black text-white hover:bg-gray-800 py-3 flex items-center justify-center gap-2">
                                    <span>‚¨ÜÔ∏è</span> UPLOAD JSON
                                </button>
                                <input type="file" id="json-file-input" class="hidden" accept=".json">
                            </div>
                        </div>
                    </div>

                    <!-- Master Data Management -->
                    <div class="neo-box bg-white p-6 lg:col-span-2">
                        <h3 class="font-display text-xl font-black mb-6 uppercase border-b-3 border-black pb-2">MASTER DATA</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <!-- Platform Manager -->
                            <div>
                                <h4 class="font-bold mb-2 bg-black text-white inline-block px-2 py-1 rounded-sm">PLATFORM</h4>
                                <div class="flex gap-2 mb-3">
                                    <input type="text" id="new-platform-input" class="neo-input py-2" placeholder="Nama baru...">
                                    <button id="add-platform-button" class="neo-btn bg-lime-400 px-4">+</button>
                                </div>
                                <div id="platform-list-container" class="h-48 overflow-y-auto border-3 border-black p-2 bg-gray-50 space-y-2 rounded-lg">
                                    <!-- Items -->
                                </div>
                            </div>

                            <!-- Location Manager -->
                            <div>
                                <h4 class="font-bold mb-2 bg-black text-white inline-block px-2 py-1 rounded-sm">LOKASI</h4>
                                <div class="flex gap-2 mb-3">
                                    <input type="text" id="new-location-input" class="neo-input py-2" placeholder="Nama baru...">
                                    <button id="add-location-button" class="neo-btn bg-lime-400 px-4">+</button>
                                </div>
                                <div id="location-list-container" class="h-48 overflow-y-auto border-3 border-black p-2 bg-gray-50 space-y-2 rounded-lg">
                                    <!-- Items -->
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </main>
    </div>

    <!-- === MODALS === -->

    <!-- ADD/EDIT GAME MODAL -->
    <div id="game-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden modal-backdrop">
        <div id="modal-content" class="neo-box bg-white w-full max-w-2xl m-4 shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] transform transition-all scale-95 opacity-0">
            <div class="bg-lime-400 border-b-3 border-black p-4 flex justify-between items-center rounded-t-lg">
                <h3 id="modal-title" class="font-display font-black text-xl uppercase">EDITOR GAME</h3>
                <button id="cancel-button" class="font-bold text-xl hover:text-red-600">‚úï</button>
            </div>
            
            <form id="game-form" class="p-6">
                <input type="hidden" id="game-id">
                <div id="game-rows-container" class="space-y-6 max-h-[60vh] overflow-y-auto px-2">
                    <!-- Form Row injected by JS -->
                </div>
                
                <div class="mt-8 flex flex-col sm:flex-row gap-4 pt-4 border-t-3 border-black border-dashed">
                    <button type="button" id="add-row-button" class="neo-btn bg-yellow-300 px-4 py-2 text-sm hidden">TAMBAH BARIS LAIN</button>
                    <div class="flex-grow"></div>
                    <button type="submit" id="save-form-button" class="neo-btn bg-black text-white px-8 py-3 hover:bg-gray-800 w-full sm:w-auto">SIMPAN DATA</button>
                </div>
            </form>
        </div>
    </div>

    <!-- BULK EDIT MODAL -->
    <div id="bulk-edit-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden modal-backdrop">
        <div id="bulk-edit-modal-content" class="neo-box bg-white w-full max-w-lg m-4 shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] transform transition-all scale-95 opacity-0">
            <div class="bg-blue-400 border-b-3 border-black p-4 rounded-t-lg">
                <h3 class="font-display font-black text-xl uppercase text-white">EDIT MASAL</h3>
            </div>
            <form id="bulk-edit-form" class="p-6 space-y-4">
                <p id="bulk-edit-info" class="font-bold mb-4 text-center bg-gray-100 p-2 border-2 border-black rounded-lg"></p>
                
                <!-- Fields -->
                <div class="flex items-center gap-3">
                    <input type="checkbox" id="bulk-update-platform-check" class="w-6 h-6 border-3 border-black rounded-sm">
                    <div class="flex-grow">
                        <label class="text-xs font-bold uppercase">Platform Baru</label>
                        <select id="bulk-platform" class="neo-input py-2"></select>
                    </div>
                </div>
                 <div class="flex items-center gap-3">
                    <input type="checkbox" id="bulk-update-location-check" class="w-6 h-6 border-3 border-black rounded-sm">
                    <div class="flex-grow">
                        <label class="text-xs font-bold uppercase">Lokasi Baru</label>
                        <select id="bulk-location" class="neo-input py-2"></select>
                    </div>
                </div>
                 <div class="flex items-center gap-3">
                    <input type="checkbox" id="bulk-update-price-check" class="w-6 h-6 border-3 border-black rounded-sm">
                    <div class="flex-grow">
                        <label class="text-xs font-bold uppercase">Harga Baru</label>
                        <input type="number" id="bulk-price" class="neo-input py-2">
                    </div>
                </div>
                 <div class="flex items-center gap-3">
                    <input type="checkbox" id="bulk-update-status-check" class="w-6 h-6 border-3 border-black rounded-sm">
                    <div class="flex-grow">
                        <label class="text-xs font-bold uppercase">Status Baru</label>
                        <select id="bulk-status" class="neo-input py-2">
                            <option>Belum dimainkan</option>
                            <option>Dimainkan</option>
                            <option>Selesai</option>
                        </select>
                    </div>
                </div>

                <div class="flex justify-end gap-3 mt-6">
                    <button type="button" id="bulk-edit-cancel-button" class="neo-btn bg-white px-4 py-2">BATAL</button>
                    <button type="submit" class="neo-btn bg-blue-500 text-white px-6 py-2">TERAPKAN</button>
                </div>
            </form>
        </div>
    </div>

    <!-- DELETE CONFIRM MODAL -->
    <div id="delete-confirm-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden modal-backdrop">
        <div id="delete-confirm-modal-content" class="neo-box bg-red-100 w-full max-w-sm m-4 border-red-500 shadow-[8px_8px_0px_0px_rgba(239,68,68,1)] transform transition-all scale-95 opacity-0">
            <div class="p-6 text-center">
                <div class="text-5xl mb-4">‚ö†Ô∏è</div>
                <h3 class="font-display font-black text-xl uppercase mb-2">YAKIN HAPUS?</h3>
                <p id="delete-confirm-message" class="font-bold mb-6">Tindakan ini tidak dapat dibatalkan.</p>
                <div class="flex justify-center gap-4">
                    <button id="cancel-delete-button" class="neo-btn bg-white px-4 py-2">JANGAN</button>
                    <button id="confirm-delete-button" class="neo-btn bg-red-500 text-white px-6 py-2 hover:bg-red-600">YA, HAPUS</button>
                </div>
            </div>
        </div>
    </div>

    <!-- EDIT ITEM MODAL (Platform/Location) -->
    <div id="edit-item-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden modal-backdrop">
        <div id="edit-item-modal-content" class="neo-box bg-white w-full max-w-sm m-4 transform transition-all scale-95 opacity-0">
            <div class="bg-gray-200 border-b-3 border-black p-3 rounded-t-lg">
                <h3 id="edit-item-modal-title" class="font-display font-bold uppercase">EDIT ITEM</h3>
            </div>
            <form id="edit-item-form" class="p-6">
                <input type="hidden" id="edit-item-id">
                <input type="hidden" id="edit-item-type">
                <div class="mb-6">
                    <label class="font-black text-xs uppercase mb-1 block">Nama Baru</label>
                    <input type="text" id="edit-item-name-input" class="neo-input" required>
                </div>
                <div class="flex justify-end gap-3">
                    <button type="button" id="edit-item-cancel-button" class="neo-btn bg-white px-4 py-2">BATAL</button>
                    <button type="submit" id="edit-item-save-button" class="neo-btn bg-lime-400 px-6 py-2">SIMPAN</button>
                </div>
            </form>
        </div>
    </div>

    <!-- TOAST -->
    <div id="toast" class="fixed bottom-5 left-5 right-5 md:left-auto md:right-5 md:w-80 neo-box bg-black text-white p-4 flex items-center gap-3 transform translate-y-24 opacity-0 transition-all duration-300 z-50">
        <div class="text-2xl">üí¨</div>
        <p id="toast-message" class="font-bold text-sm">Notifikasi</p>
    </div>

    <!-- SCRIPT -->
    <script type="module" src="/script.js"></script>
</body>
</html>